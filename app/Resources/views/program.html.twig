{% extends ':Default:base.html.twig' %}

{% block head %}
    {% stylesheets 'css/custom/program.less' filter='cssrewrite,lessphp' output='compiled/program.css' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}

{% block body %}
    <div class="header">
        <div>
            <span id="projectDetailsProjectTitle">{{ program.name }}</span>
            <div class="projectDetailsAuthorTop">
                <ul>
                    <li>
                        <div class="img-author"></div>
                        <div class="link-author">
                            <a href="{{ url('profile', { id : program.user.id, flavor: app.request.attributes.get('flavor') }) }}">{{ program.user }}</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div id="projectDetailsContainer">
        <div class="projectDetailsThumbnail">
            <a href="{{ program_details.downloadUrl }}">
                <img id="projectDetailsThumbnailImage" src="{{ asset(program_details.screenshotBig) }}" />
            </a>
        </div>

        <div class="projectDetailsDescription">
            <div>
                <span class="projectDetailsDescriptionHeading">{{ "programs.description"|trans({}, 'catroweb') }}</span>
            </div>

            <div class="projectDetailsDescriptionText">
                <span>{{ program.description }}</span>

                <div class="projectDetailsDownloadButton">
                    <a style="text-decoration: none;" href="{{ program_details.downloadUrl }}">
                        <div class="blue">
                            <span class="projectDetailsDownloadText shrinkTextToFit" style="font-size: 25px;">{{ "programs.download"|trans({}, 'catroweb') }}</span>
                        </div>
                    </a>
                </div>
                <span id="reportAsInappropriateButton">{{ "programs.reportAsInappropriate"|trans({}, 'catroweb') }}</span>
                <br>
              <span id="projectDetailsDownloadLanguageVersion">{{ "programs.languageVersion"|trans({ "%languageVersion%" : program_details.languageVersion }, 'catroweb') }}</span>
            </div>
        </div>

        {# Todo: Check if the user is logged in #}
        <div id="projectDetailsReportContainer">
            <div class="reportAsInappropriateDialog" id="reportAsInappropriateDialog" style="display: none;">
              {% if app.user != null %}
                TODO report program
              {% else %}
                {{ "programs.reportLoginBeforeLink"|trans({}, 'catroweb') }} <a href="{{ url('login', { flavor: app.request.attributes.get('flavor') }) }}">{{ "programs.reportLoginLink"|trans({}, 'catroweb') }}</a> {{ "programs.reportLoginAfterLink"|trans({}, 'catroweb') }}
              {% endif %}
            </div>
        </div>

        <div class="projectDetailsSeperator">
        </div>

        <div class="projectDetailsInformation">
            <ul>
                <li>
                    <div class="img-age"></div>
                    <div class="projectDetailsInformationText">
                        {{ "programs.age"|trans({ '%age%' : program_details.age }, "catroweb") }}
                    </div>
                </li>
                <li>
                    <div class="img-size"></div>
                    <div class="projectDetailsInformationText">
                        {{ "programs.size"|trans({ '%size%' : program_details.filesize }, "catroweb") }}
                    </div>
                </li>
                <li>
                    <div class="img-downloads"></div>
                    <div class="projectDetailsInformationText">
                        {{ "programs.downloads"|trans({ '%downloads%' : program_details.downloads }, "catroweb") }}
                    </div>
                </li>
                <li>
                    <div class="img-views"></div>
                    <div class="projectDetailsInformationText">
                        {{ "programs.views"|trans({ '%views%' : program_details.views }, "catroweb") }}
                    </div>
                </li>
            </ul>
        </div>
    </div>
{% endblock %}


{% block js %}
  <script>
    $("#reportAsInappropriateDialog").toggle(false);
    //$("#reportAsInappropriateAnswer").toggle(false);

    $("#reportAsInappropriateButton").click(function() {
      //$("#reportAsInappropriateAnswer").toggle(false);
      $("#reportAsInappropriateDialog").toggle();
    });

    //$("#reportInappropriateCancelButton").click(function() {
    //  $("#reportAsInappropriateDialog").toggle(false);
    //});
    //$("#reportInappropriateReportButton").click($.proxy(this.reportInappropriateSubmit, this));
    //$("#reportInappropriateReason").keypress($.proxy(this.reportInappropriateCatchKeypress, this));
  </script>
{% endblock %}